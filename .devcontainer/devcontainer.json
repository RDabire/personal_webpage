{
  "name": "Personal Webpage - Astro",
  "build": {
    "dockerfile": "Dockerfile",
    "args": {
      "CLAUDE_CODE_VERSION": "latest"
    }
  },

  // Network capabilities for Claude Code
  "runArgs": ["--cap-add=NET_ADMIN", "--cap-add=NET_RAW"],

  // Allow reuse of Claude Code and Codex persistent storage
  "mounts": [
    "source=claude-code-bashhistory-${devcontainerId},target=/commandhistory,type=volume",
    "source=claude-code-config-${devcontainerId},target=/home/node/.claude,type=volume",
    "source=codex-config-${devcontainerId},target=/home/node/.codex,type=volume"
  ],

  // Environment configuration
  "containerEnv": {
    "CLAUDE_CONFIG_DIR": "/home/node/.claude",
    "CODEX_CONFIG_DIR": "/home/node/.codex"
  },

  "customizations": {
    "vscode": {
      "extensions": [
        "astro-build.astro-vscode",
        "bradlc.vscode-tailwindcss",
        "esbenp.prettier-vscode",
        "ms-playwright.playwright",
        "formulahendry.auto-rename-tag",
        "christian-kohler.path-intellisense",
        "ms-vscode.vscode-typescript-next",
        "openai.chatgpt"
      ],
      "settings": {
        "terminal.integrated.defaultProfile.linux": "bash",
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "[astro]": {
          "editor.defaultFormatter": "astro-build.astro-vscode"
        }
      }
    }
  },

  "forwardPorts": [4321],
  "portsAttributes": {
    "4321": {
      "label": "Astro Dev Server",
      "onAutoForward": "notify"
    }
  },

  "postCreateCommand": "cd /workspaces/personal_webpage && npm install -g pnpm && bun install && sudo mkdir -p /home/node/.codex && sudo chown -R node:node /home/node/.codex",

  "workspaceFolder": "/workspaces/personal_webpage",

  "remoteUser": "node"
}
